# Zdalne X11

Niektóre narzędzia IBM na Linuxie czy AIXie (i nie tylko) nie mają swoich odpowiedników CLI. Dlatego czasem trzeba odpalić coś graficznego, a współczesne serwery cześto nie mają telewizora. Znam dwa sposoby na to:

- Tunelowanie X11 po ssh
- VNC - daje zdalny pulpit 

Wady i zalety:

|            | X11 po ssh | VNC |
|:---        |:---        |:--- |
| Instalacja | Prawdopodobnie wszystko już jest.| Potrzebne paczki VNC |
| Setup      | Łatwy | Bywa upiedliwy w zależności od wybranego scenariusza|
| Możliwośći | Tunel pojedynczej aplikacji | Może dać cały pulpit|
| Zlety      | Prawdopodbnie wszystko już jest. Wystarczy przełącznik `-X` do sesji ssh. | Odporność na zerwanie sesji. |
| Wady       | Zerwana sesja ssh rozwala tunelowaną aplikację. | Logowanie po XDMCP wymaga gmerania w systemd docelowego hosta. Konfiguracja bywa mniej banalna |

!!! Warning "Uwaga:"
	Zakładam, że klientem ssh, dysponującym graficznym środwoskiem jest jakiś Linux, albo Mac ( jabola nie sprawdzałem ). Jak działasz pod WinDOS, to pewnie potrzebujesz jakiegoś X-servera, np X-ming. A może lepiej przejść na WSL?

## Biblioteki graficzne na hoście

Niezależnie od wybranej metody dobrania się do grafiki, zdalny program graficzny zwykle potrzebuje jakichś bibliotek graficznych na hoscie, z którego jest uruchomiony. Dlatego do systemu hosta zwykle dorzucam paczki, które wraz z zależnościami dołączają cały ten Xowy szpej.

Przydatne paczki, żeby host był wstanie uruchamiać większość graficznych narzędzi IBMa. W tym także takie, które poamiętają poprzednie tysiąclecie. 

- motif
- xorg-x11-xauth
- xterm
- gtk2



```shell
$ sudo dnf install motif xorg-x11-xauth xterm gtk2
```

!!! Tip "Wskazówka:"
	Jeśli planujesz używać zdalnego pulpitu przez VNC, warto zainstalować profil `Server with GUI` np komendą `dnf groupinstall "Server with GUI"`.

## Tunelowanie X11 po `ssh`

To standardowa funkcja `ssh`. Współczesne dystrybucje często to wyłączają dlatego możę być potrzebny przełącznik `-X`:

```sh
ssh -X user@zdalny.host
```

Skąd wiadomo, że działa? Podczas logowania będzie widać, że wywołał `xauth` i będzie ustawiona zmienna `$DISPLAY`.

```shell
$ ssh -X root@10.10.3.93
root@10.10.3.93's password: 

Last login: Thu Nov 20 10:03:00 2025 from 10.10.120.40
/usr/bin/xauth:  file /root/.Xauthority does not exist
[root@dibitu ~]# echo $DISPLAY
localhost:10.0
```

Teraz można uruchamiać zdalne programy graficzne na loklanym telewizorze. 

!!! Tip "Wskazówka:"
	Jeśli masz monitor o wysokiej rozdzielczości, np 142 DPI (4k 27"), ekran Twojego programu może mieć bardzo małe czczionki. Jeżeli Twoja aplikacja jest oparta o GTK3 lub wyższą, to honoruje ona zmienną `GDK_SCALE`, którą można ustawić na `2` co powoduje przeskalowanie okna o 100%. **Przykład:** `export GDK_SCALE=2`.

## VNC

Kiedyś to napiszę :shrug:.

### Sesja ad-hoc

### Zdalne logowanie po XDMCP
